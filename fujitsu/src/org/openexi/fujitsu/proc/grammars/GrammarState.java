package org.openexi.fujitsu.proc.grammars;

public class GrammarState {
  
  public Grammar targetGrammar;

  ///////////////////////////////////////////////////////////////////////////
  /// CommonState
  ///////////////////////////////////////////////////////////////////////////

  /** Parent state in the state stack. */
  final GrammarState parent;
  final DocumentGrammarState documentGrammarState;

  public byte phase;
  
  ///////////////////////////////////////////////////////////////////////////
  /// ComplexContentState, SequenceChoiceState
  ///////////////////////////////////////////////////////////////////////////

  int occurs; 
  /**
   * The range of cursor is:
   * [0...2] for ComplexContentState
   * [ 0 ... 2*(m_n_particles+1) ) for SequenceChoiceState
   * [ 0 ... m_n_attruses ] for ElementTagState
   */
  int cursor; 

  ///////////////////////////////////////////////////////////////////////////
  /// ElementTagState
  ///////////////////////////////////////////////////////////////////////////

  GrammarState contentStateVariables;
  boolean nilled;

  ///////////////////////////////////////////////////////////////////////////
  /// ElementState
  ///////////////////////////////////////////////////////////////////////////

  GrammarState elementTagStateVariables;

  ///////////////////////////////////////////////////////////////////////////
  /// Methods
  ///////////////////////////////////////////////////////////////////////////

  protected GrammarState(GrammarState parent, DocumentGrammarState documentGrammarState) {
    this.parent = parent;
    this.documentGrammarState = documentGrammarState != null ? documentGrammarState : (DocumentGrammarState)this;
  }
  
}
